services:
  - type: web
    name: scholara-ai-service
    env: python
    plan: free  # Change to 'starter' or 'standard' for production
    buildCommand: pip install -r requirements.txt && python manage.py collectstatic --noinput
    startCommand: gunicorn ai_service.wsgi:application --bind 0.0.0.0:$PORT --timeout 25 --workers 2 --threads 2
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.0
      - key: DJANGO_SETTINGS_MODULE
        value: ai_service.settings
      - key: DEBUG
        value: False
      - key: SECRET_KEY
        generateValue: true
      - key: CORS_ALLOW_ALL_ORIGINS
        value: "True"  # Allow all origins for development (localhost + Render frontend)
      - key: CORS_ALLOWED_ORIGINS
        value: "http://localhost:5173,http://localhost:3000,http://127.0.0.1:5173,http://127.0.0.1:3000"
        # Update with your frontend Render URL when deployed


